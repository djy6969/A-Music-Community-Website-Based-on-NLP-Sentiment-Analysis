(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Blogs"],{"10ac":function(t,o,e){},"337d":function(t,o,e){"use strict";e("10ac")},6158:function(t,o,e){"use strict";e("ecb9")},ebad:function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t._self._c;return o("div",[t._l(t.blogListData,(function(t,e){return o("div",{key:e,staticClass:"blog-container"},[o("blog-card",{attrs:{"blog-id":t.id,username:t.username,"blog-text":t.blog_content,picList:t.picList,avatar:t.head}})],1)})),o("div",{staticClass:"el-backtop",on:{click:t.showAddBlogDialog}},[o("i",{staticClass:"el-icon-plus"})]),o("el-dialog",{attrs:{title:"Add Your Feelings Now",visible:t.visible,width:"30%"},on:{"update:visible":function(o){t.visible=o}}},[o("el-form",[o("el-form-item",[o("el-input",{attrs:{type:"textarea",rows:4,placeholder:"input your feelings"},model:{value:t.addBlogForm.text,callback:function(o){t.$set(t.addBlogForm,"text",o)},expression:"addBlogForm.text"}})],1),o("el-form-item",[o("el-upload",{attrs:{action:"#","on-change":t.uploadSuccess,"auto-upload":!1,accept:".jpg,.png"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v("Upload Pictures")])],1),o("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(o){t.dialogVisible=o}}},[o("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),o("el-form-item",[o("el-button",{on:{click:t.onSubmitBlog}},[t._v("Submit")])],1)],1)],1)],2)},i=[],l=function(){var t=this,o=t._self._c;return o("el-card",{staticClass:"blog-card",staticStyle:{"background-position":"center"}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("el-avatar",{attrs:{src:t.avatar}}),t._v("\n    "+t._s(t.username)+":\n  ")],1),o("div",{staticClass:"text item",staticStyle:{"margin-bottom":"18px"}},[t._v(t._s(t.blogText))]),o("div",{staticClass:"box"},t._l(t.picList,(function(t,e){return o("div",{key:e,staticClass:"imageBox"},[o("el-image",{staticStyle:{width:"80%"},attrs:{src:t}})],1)})),0),o("el-button",{staticStyle:{width:"10%",float:"right",color:"#D33A31"},attrs:{size:"small",type:"text"},on:{click:t.getBlogComments}},[t._v("Comments\n  ")]),o("el-dialog",{attrs:{title:"Comments",visible:t.commentDialogVisible,width:"50%"},on:{"update:visible":function(o){t.commentDialogVisible=o}}},[t._l(t.commentData,(function(e,a){return o("ul",{key:a},[o("li",[t._v(t._s(e.username)+":   "+t._s(e.content))])])})),o("div",{staticStyle:{display:"flex"}},[o("el-input",{attrs:{placeholder:"Comment"},model:{value:t.addCommentData,callback:function(o){t.addCommentData=o},expression:"addCommentData"}}),o("el-button",{on:{click:t.addBlogComment}},[t._v("Send")])],1)],2)],1)},n=[],s=e("ed08"),c={name:"blogCard",props:["username","blogText","blogId","picList","avatar"],data:function(){return{commentData:"",commentDialogVisible:!1,addCommentData:""}},methods:{getBlogComments:function(){var t=this,o=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"});s["newRequest"].post("/blog/get_blog_comments",{blogid:this.blogId}).then((function(e){console.log(e.data),o.close(),t.commentDialogVisible=!0,t.commentData=e.data.data}))},addBlogComment:function(){var t=this,o=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"});s["newRequest"].post("/blog/post_blog_comment",{user_id:sessionStorage.getItem("userid"),blog_id:this.blogId,comment_content:this.addCommentData}).then((function(e){t.addCommentData="",console.log(e.data),o.close(),t.commentDialogVisible=!1}))}},mounted:function(){}},d=c,r=(e("6158"),e("0c7c")),g=Object(r["a"])(d,l,n,!1,null,null,null),m=g.exports,u=e("cebe"),b=e.n(u),p={name:"Blogs",components:{BlogCard:m},data:function(){return{visible:!1,dialogImageUrl:"",dialogVisible:!1,blogData:"",addBlogForm:{text:"",picFiles:[],picFileNumber:""},blogListData:[]}},methods:{showAddBlogDialog:function(){this.visible=!0},uploadSuccess:function(t,o){console.log("file "+t),console.log("fileList "+o),this.addBlogForm.picFiles.push(t.raw),console.log(this.addBlogForm.picFiles)},onSubmitBlog:function(){var t=this,o=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"}),e=new FormData;e.append("text",this.addBlogForm.text),e.append("user_id",sessionStorage.getItem("userid"));for(var a=0;a<this.addBlogForm.picFiles.length;a++){var i="picList[".concat(a,"]");e.append(i,this.addBlogForm.picFiles[a]),this.addBlogForm.picFileNumber=a+1}e.append("picNumber",this.addBlogForm.picFileNumber),console.log(e),b()({method:"POST",url:"blog/post_blog",headers:{"Content-Type":"multipart/form-data"},data:e}).then((function(e){t.$message({showClose:!0,message:e.data.meg,type:"success"}),o.close(),location.reload()}))},getAllBlogsData:function(){var t=this,o=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0,0,0,0.7)"});s["newRequest"].get("/blog/get_all_blogs").then((function(e){console.log(e.data),t.blogListData=e.data,o.close(),console.log(t.blogListData)}))}},mounted:function(){this.getAllBlogsData()}},h=p,f=(e("337d"),Object(r["a"])(h,a,i,!1,null,"810f0cbc",null));o["default"]=f.exports},ecb9:function(t,o,e){}}]);